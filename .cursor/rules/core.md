# Core Rules

このルールは AI エージェントの行動規則である。
最小変更・安全変更・既存設計維持を最優先とする。

---

## 基本方針

* 1PR = 1目的
* 関係のないリファクタを行わない
* 変更範囲を最小化する
* 既存設計を壊さない
* 動作変更を伴う場合は必ず明示する

---

## 共通コーディング規約

* 既存ユーティリティを優先利用
* 不要なコメントを書かない
* 略語禁止（tmp, util, data 等）
* boolean は is/has/can で開始
* 関数名は動詞から開始
* null/undefined を安易に許容しない

---

## 例外処理

* 空の catch を書かない
* エラーを握り潰さない
* 予測可能な失敗は分岐で処理
* エラーメッセージは具体的にする

---

## テスト

* public API 変更時はテスト更新必須
* バグ修正時は再発防止テストを書く
* テストのための実装変更は禁止

---

## セキュリティ

* 外部入力を必ず検証
* SQL/コマンドを文字列連結しない
* 秘密情報は環境変数から取得

---

## Rust ルール

* unwrap / expect を本番コードで使用しない
* panic! をロジックに使用しない
* Result を必ず呼び出し元へ返す
* anyhow はアプリ層のみ使用
* unsafe を新規追加しない
* 不要な clone を追加しない

---

## Python ルール

* 型ヒント必須
* Optional を明示する
* broad except 禁止（except: を書かない）
* print デバッグ禁止
* グローバル状態を増やさない

---

## Vue.js ルール

* props を直接変更しない
* API呼び出しを template に書かない
* watch 乱用禁止（computed優先）
* ビジネスロジックは composable に分離
* 1コンポーネント1責務

---

## コミットメッセージ

* Conventional Commits
* type(scope): summary
* 50文字以内
* breaking change は ! を付与

---

## 禁止事項

* console.log を残さない
* デバッグコードをコミットしない
* 無関係ファイルを変更しない
* フォーマット変更のみPR禁止
* force push 禁止

---

## 実装前チェック

1. 既存実装検索
2. 影響範囲確認
3. テスト確認
4. 公開API確認

---

## 実装後チェック

* 不要ログ削除
* lint想定修正
* 差分最小化
* Conventional Commit 生成
* 影響範囲再確認
